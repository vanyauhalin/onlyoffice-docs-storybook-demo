import{c as T}from"./index-DMcYmaLp.js";import{p as q,a as G,b as X}from"./jsxRuntime.module-DRFHsHo7.js";import{v as Z}from"./index-DzYjCZzd.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./preact.module-BuNwemxg.js";function w(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const o=t.charCodeAt(n);let l="";if(o===37&&T(t.charCodeAt(n+1))&&T(t.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const c=t.charCodeAt(n+1);o<56320&&c>56319&&c<57344?(l=String.fromCharCode(o,c),i=1):l="�"}else l=String.fromCharCode(o);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function K(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Q(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function W(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function $(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ee(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function te(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=w(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let l,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=o+1,c+=1,t.footnoteCounts.set(r,c);const a={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,a);const h={type:"element",tagName:"sup",properties:{},children:[a]};return t.patch(e,h),t.applyData(e,h)}function ne(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function re(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function H(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function ie(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return H(t,e);const i={src:w(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,o),t.applyData(e,o)}function le(t,e){const n={src:w(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function oe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function ce(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return H(t,e);const i={href:w(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function se(t,e){const n={href:w(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function ae(t,e,n){const r=t.all(e),i=n?pe(n):v(e),o={},l=[];if(typeof e.checked=="boolean"){const s=r[0];let p;s&&s.type==="element"&&s.tagName==="p"?p=s:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const s=r[c];(i||c!==0||s.type!=="element"||s.tagName!=="p")&&l.push({type:"text",value:`
`}),s.type==="element"&&s.tagName==="p"&&!i?l.push(...s.children):l.push(s)}const a=r[r.length-1];a&&(i||a.type!=="element"||a.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:l};return t.patch(e,h),t.applyData(e,h)}function pe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=v(n[r])}return e}function v(t){const e=t.spread;return e??t.children.length>1}function ue(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function fe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function he(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function ye(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function de(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=q(e.children[1]),a=G(e.children[e.children.length-1]);c&&a&&(l.position={start:c,end:a}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function me(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let a=-1;const h=[];for(;++a<c;){const p=e.children[a],u={},y=l?l[a]:void 0;y&&(u.align=y);let f={type:"element",tagName:o,properties:u,children:[]};p&&(f.children=t.all(p),t.patch(p,f),f=t.applyData(p,f)),h.push(f)}const s={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,s),t.applyData(e,s)}function ge(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const E=9,M=32;function be(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const o=[];for(;r;)o.push(j(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return o.push(j(e.slice(i),i>0,!1)),o.join("")}function j(t,e,n){let r=0,i=t.length;if(e){let o=t.codePointAt(r);for(;o===E||o===M;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(i-1);for(;o===E||o===M;)i--,o=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function we(t,e){const n={type:"text",value:be(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function xe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Ne={blockquote:K,break:Q,code:W,delete:$,emphasis:ee,footnoteReference:te,heading:ne,html:re,imageReference:ie,image:le,inlineCode:oe,linkReference:ce,link:se,listItem:ae,list:ue,paragraph:fe,root:he,strong:ye,table:de,tableCell:ge,tableRow:me,text:we,thematicBreak:xe,toml:k,yaml:k,definition:k,footnoteDefinition:k};function k(){}const J=-1,I=0,D=1,S=2,O=3,P=4,R=5,L=6,V=7,Y=8,F=typeof self=="object"?self:globalThis,ke=(t,e)=>{const n=(i,o)=>(t.set(o,i),i),r=i=>{if(t.has(i))return t.get(i);const[o,l]=e[i];switch(o){case I:case J:return n(l,i);case D:{const c=n([],i);for(const a of l)c.push(r(a));return c}case S:{const c=n({},i);for(const[a,h]of l)c[r(a)]=r(h);return c}case O:return n(new Date(l),i);case P:{const{source:c,flags:a}=l;return n(new RegExp(c,a),i)}case R:{const c=n(new Map,i);for(const[a,h]of l)c.set(r(a),r(h));return c}case L:{const c=n(new Set,i);for(const a of l)c.add(r(a));return c}case V:{const{name:c,message:a}=l;return n(new F[c](a),i)}case Y:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i)}return n(new F[o](l),i)};return r},U=t=>ke(new Map,t)(0),b="",{toString:Ce}={},{keys:De}=Object,N=t=>{const e=typeof t;if(e!=="object"||!t)return[I,e];const n=Ce.call(t).slice(8,-1);switch(n){case"Array":return[D,b];case"Object":return[S,b];case"Date":return[O,b];case"RegExp":return[P,b];case"Map":return[R,b];case"Set":return[L,b]}return n.includes("Array")?[D,n]:n.includes("Error")?[V,n]:[S,n]},C=([t,e])=>t===I&&(e==="function"||e==="symbol"),Se=(t,e,n,r)=>{const i=(l,c)=>{const a=r.push(l)-1;return n.set(c,a),a},o=l=>{if(n.has(l))return n.get(l);let[c,a]=N(l);switch(c){case I:{let s=l;switch(a){case"bigint":c=Y,s=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+a);s=null;break;case"undefined":return i([J],l)}return i([c,s],l)}case D:{if(a)return i([a,[...l]],l);const s=[],p=i([c,s],l);for(const u of l)s.push(o(u));return p}case S:{if(a)switch(a){case"BigInt":return i([a,l.toString()],l);case"Boolean":case"Number":case"String":return i([a,l.valueOf()],l)}if(e&&"toJSON"in l)return o(l.toJSON());const s=[],p=i([c,s],l);for(const u of De(l))(t||!C(N(l[u])))&&s.push([o(u),o(l[u])]);return p}case O:return i([c,l.toISOString()],l);case P:{const{source:s,flags:p}=l;return i([c,{source:s,flags:p}],l)}case R:{const s=[],p=i([c,s],l);for(const[u,y]of l)(t||!(C(N(u))||C(N(y))))&&s.push([o(u),o(y)]);return p}case L:{const s=[],p=i([c,s],l);for(const u of l)(t||!C(N(u)))&&s.push(o(u));return p}}const{message:h}=l;return i([c,{name:a,message:h}],l)};return o},_=(t,{json:e,lossy:n}={})=>{const r=[];return Se(!(e||n),!!e,new Map,r)(t),r},A=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?U(_(t,e)):structuredClone(t):(t,e)=>U(_(t,e));function Ae(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Ie(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Be(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Ae,r=t.options.footnoteBackLabel||Ie,i=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let a=-1;for(;++a<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[a]);if(!h)continue;const s=t.all(h),p=String(h.identifier).toUpperCase(),u=w(p.toLowerCase());let y=0;const f=[],g=t.footnoteCounts.get(p);for(;g!==void 0&&++y<=g;){f.length>0&&f.push({type:"text",value:" "});let d=typeof n=="string"?n:n(a,y);typeof d=="string"&&(d={type:"text",value:d}),f.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+u+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(a,y),className:["data-footnote-backref"]},children:Array.isArray(d)?d:[d]})}const m=s[s.length-1];if(m&&m.type==="element"&&m.tagName==="p"){const d=m.children[m.children.length-1];d&&d.type==="text"?d.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...f)}else s.push(...f);const x={type:"element",tagName:"li",properties:{id:e+"fn-"+u},children:t.wrap(s,!0)};t.patch(h,x),c.push(x)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...A(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const B={}.hasOwnProperty,Oe={};function Pe(t,e){const n=e||Oe,r=new Map,i=new Map,o=new Map,l={...Ne,...n.handlers},c={all:h,applyData:Le,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:a,options:n,patch:Re,wrap:Ee};return Z(t,function(s){if(s.type==="definition"||s.type==="footnoteDefinition"){const p=s.type==="definition"?r:i,u=String(s.identifier).toUpperCase();p.has(u)||p.set(u,s)}}),c;function a(s,p){const u=s.type,y=c.handlers[u];if(B.call(c.handlers,u)&&y)return y(c,s,p);if(c.options.passThrough&&c.options.passThrough.includes(u)){if("children"in s){const{children:g,...m}=s,x=A(m);return x.children=c.all(s),x}return A(s)}return(c.options.unknownHandler||Te)(c,s,p)}function h(s){const p=[];if("children"in s){const u=s.children;let y=-1;for(;++y<u.length;){const f=c.one(u[y],s);if(f){if(y&&u[y-1].type==="break"&&(!Array.isArray(f)&&f.type==="text"&&(f.value=z(f.value)),!Array.isArray(f)&&f.type==="element")){const g=f.children[0];g&&g.type==="text"&&(g.value=z(g.value))}Array.isArray(f)?p.push(...f):p.push(f)}}}return p}}function Re(t,e){t.position&&(e.position=X(t))}function Le(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,A(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Te(t,e){const n=e.data||{},r="value"in e&&!(B.call(n,"hProperties")||B.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Ee(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function z(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function ze(t,e){const n=Pe(t,e),r=n.one(t,void 0),i=Be(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}export{Ae as defaultFootnoteBackContent,Ie as defaultFootnoteBackLabel,Ne as defaultHandlers,ze as toHast};
