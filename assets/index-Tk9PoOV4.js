import{o as q}from"./jsxRuntime.module-DRFHsHo7.js";import{v as j,E as Q,c as U}from"./index-DzYjCZzd.js";import{t as z}from"./index-DzL_e8Nz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./preact.module-BuNwemxg.js";function H(t,n={}){const e=(n.align||[]).concat(),a=n.stringLength||G,c=[],u=[],i=[],l=[];let o=0,r=-1;for(;++r<t.length;){const g=[],m=[];let f=-1;for(t[r].length>o&&(o=t[r].length);++f<t[r].length;){const p=W(t[r][f]);if(n.alignDelimiters!==!1){const d=a(p);m[f]=d,(l[f]===void 0||d>l[f])&&(l[f]=d)}g.push(p)}u[r]=g,i[r]=m}let s=-1;if(typeof e=="object"&&"length"in e)for(;++s<o;)c[s]=I(e[s]);else{const g=I(e);for(;++s<o;)c[s]=g}s=-1;const h=[],x=[];for(;++s<o;){const g=c[s];let m="",f="";g===99?(m=":",f=":"):g===108?m=":":g===114&&(f=":");let p=n.alignDelimiters===!1?1:Math.max(1,l[s]-m.length-f.length);const d=m+"-".repeat(p)+f;n.alignDelimiters!==!1&&(p=m.length+p+f.length,p>l[s]&&(l[s]=p),x[s]=p),h[s]=d}u.splice(1,0,h),i.splice(1,0,x),r=-1;const k=[];for(;++r<u.length;){const g=u[r],m=i[r];s=-1;const f=[];for(;++s<o;){const p=g[s]||"";let d="",b="";if(n.alignDelimiters!==!1){const v=l[s]-(m[s]||0),_=c[s];_===114?d=" ".repeat(v):_===99?v%2?(d=" ".repeat(v/2+.5),b=" ".repeat(v/2-.5)):(d=" ".repeat(v/2),b=d):b=" ".repeat(v)}n.delimiterStart!==!1&&!s&&f.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&p==="")&&(n.delimiterStart!==!1||s)&&f.push(" "),n.alignDelimiters!==!1&&f.push(d),f.push(p),n.alignDelimiters!==!1&&f.push(b),n.padding!==!1&&f.push(" "),(n.delimiterEnd!==!1||s!==o-1)&&f.push("|")}k.push(n.delimiterEnd===!1?f.join("").replace(/ +$/,""):f.join(""))}return k.join(`
`)}function W(t){return t==null?"":String(t)}function G(t){return t.length}function I(t){const n=typeof t=="string"?t.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function J(t,n,e,a){const c=e.enter("blockquote"),u=e.createTracker(a);u.move("> "),u.shift(2);const i=e.indentLines(e.containerFlow(t,u.current()),X);return c(),i}function X(t,n,e){return">"+(e?"":" ")+t}function K(t,n){return R(t,n.inConstruct,!0)&&!R(t,n.notInConstruct,!1)}function R(t,n,e){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return e;let a=-1;for(;++a<n.length;)if(t.includes(n[a]))return!0;return!1}function P(t,n,e,a){let c=-1;for(;++c<e.unsafe.length;)if(e.unsafe[c].character===`
`&&K(e.stack,e.unsafe[c]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function N(t,n){const e=String(t);let a=e.indexOf(n),c=a,u=0,i=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===c?++u>i&&(i=u):u=1,c=a+n.length,a=e.indexOf(n,c);return i}function V(t,n){return!!(n.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Y(t){const n=t.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function Z(t,n,e,a){const c=Y(e),u=t.value||"",i=c==="`"?"GraveAccent":"Tilde";if(V(t,e)){const h=e.enter("codeIndented"),x=e.indentLines(u,ee);return h(),x}const l=e.createTracker(a),o=c.repeat(Math.max(N(u,c)+1,3)),r=e.enter("codeFenced");let s=l.move(o);if(t.lang){const h=e.enter(`codeFencedLang${i}`);s+=l.move(e.safe(t.lang,{before:s,after:" ",encode:["`"],...l.current()})),h()}if(t.lang&&t.meta){const h=e.enter(`codeFencedMeta${i}`);s+=l.move(" "),s+=l.move(e.safe(t.meta,{before:s,after:`
`,encode:["`"],...l.current()})),h()}return s+=l.move(`
`),u&&(s+=l.move(u+`
`)),s+=l.move(o),r(),s}function ee(t,n,e){return(e?"":"    ")+t}function C(t){const n=t.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function te(t,n,e,a){const c=C(e),u=c==='"'?"Quote":"Apostrophe",i=e.enter("definition");let l=e.enter("label");const o=e.createTracker(a);let r=o.move("[");return r+=o.move(e.safe(e.associationId(t),{before:r,after:"]",...o.current()})),r+=o.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=e.enter("destinationLiteral"),r+=o.move("<"),r+=o.move(e.safe(t.url,{before:r,after:">",...o.current()})),r+=o.move(">")):(l=e.enter("destinationRaw"),r+=o.move(e.safe(t.url,{before:r,after:t.title?" ":`
`,...o.current()}))),l(),t.title&&(l=e.enter(`title${u}`),r+=o.move(" "+c),r+=o.move(e.safe(t.title,{before:r,after:c,...o.current()})),r+=o.move(c),l()),i(),r}function ne(t){const n=t.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}E.peek=re;function E(t,n,e,a){const c=ne(e),u=e.enter("emphasis"),i=e.createTracker(a);let l=i.move(c);return l+=i.move(e.containerPhrasing(t,{before:l,after:c,...i.current()})),l+=i.move(c),u(),l}function re(t,n,e){return e.options.emphasis||"*"}function ie(t,n){let e=!1;return j(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return e=!0,Q}),!!((!t.depth||t.depth<3)&&z(t)&&(n.options.setext||e))}function oe(t,n,e,a){const c=Math.max(Math.min(6,t.depth||1),1),u=e.createTracker(a);if(ie(t,e)){const s=e.enter("headingSetext"),h=e.enter("phrasing"),x=e.containerPhrasing(t,{...u.current(),before:`
`,after:`
`});return h(),s(),x+`
`+(c===1?"=":"-").repeat(x.length-(Math.max(x.lastIndexOf("\r"),x.lastIndexOf(`
`))+1))}const i="#".repeat(c),l=e.enter("headingAtx"),o=e.enter("phrasing");u.move(i+" ");let r=e.containerPhrasing(t,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(r)&&(r="&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"+r.slice(1)),r=r?i+" "+r:i,e.options.closeAtx&&(r+=" "+i),o(),l(),r}S.peek=le;function S(t){return t.value||""}function le(){return"<"}L.peek=ce;function L(t,n,e,a){const c=C(e),u=c==='"'?"Quote":"Apostrophe",i=e.enter("image");let l=e.enter("label");const o=e.createTracker(a);let r=o.move("![");return r+=o.move(e.safe(t.alt,{before:r,after:"]",...o.current()})),r+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=e.enter("destinationLiteral"),r+=o.move("<"),r+=o.move(e.safe(t.url,{before:r,after:">",...o.current()})),r+=o.move(">")):(l=e.enter("destinationRaw"),r+=o.move(e.safe(t.url,{before:r,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=e.enter(`title${u}`),r+=o.move(" "+c),r+=o.move(e.safe(t.title,{before:r,after:c,...o.current()})),r+=o.move(c),l()),r+=o.move(")"),i(),r}function ce(){return"!"}A.peek=ae;function A(t,n,e,a){const c=t.referenceType,u=e.enter("imageReference");let i=e.enter("label");const l=e.createTracker(a);let o=l.move("![");const r=e.safe(t.alt,{before:o,after:"]",...l.current()});o+=l.move(r+"]["),i();const s=e.stack;e.stack=[],i=e.enter("reference");const h=e.safe(e.associationId(t),{before:o,after:"]",...l.current()});return i(),e.stack=s,u(),c==="full"||!r||r!==h?o+=l.move(h+"]"):c==="shortcut"?o=o.slice(0,-1):o+=l.move("]"),o}function ae(){return"!"}B.peek=ue;function B(t,n,e){let a=t.value||"",c="`",u=-1;for(;new RegExp("(^|[^`])"+c+"([^`]|$)").test(a);)c+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++u<e.unsafe.length;){const i=e.unsafe[u],l=e.compilePattern(i);let o;if(i.atBreak)for(;o=l.exec(a);){let r=o.index;a.charCodeAt(r)===10&&a.charCodeAt(r-1)===13&&r--,a=a.slice(0,r)+" "+a.slice(o.index+1)}}return c+a+c}function ue(){return"`"}function D(t,n){const e=z(t);return!!(!n.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(e===t.url||"mailto:"+e===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}O.peek=se;function O(t,n,e,a){const c=C(e),u=c==='"'?"Quote":"Apostrophe",i=e.createTracker(a);let l,o;if(D(t,e)){const s=e.stack;e.stack=[],l=e.enter("autolink");let h=i.move("<");return h+=i.move(e.containerPhrasing(t,{before:h,after:">",...i.current()})),h+=i.move(">"),l(),e.stack=s,h}l=e.enter("link"),o=e.enter("label");let r=i.move("[");return r+=i.move(e.containerPhrasing(t,{before:r,after:"](",...i.current()})),r+=i.move("]("),o(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(o=e.enter("destinationLiteral"),r+=i.move("<"),r+=i.move(e.safe(t.url,{before:r,after:">",...i.current()})),r+=i.move(">")):(o=e.enter("destinationRaw"),r+=i.move(e.safe(t.url,{before:r,after:t.title?" ":")",...i.current()}))),o(),t.title&&(o=e.enter(`title${u}`),r+=i.move(" "+c),r+=i.move(e.safe(t.title,{before:r,after:c,...i.current()})),r+=i.move(c),o()),r+=i.move(")"),l(),r}function se(t,n,e){return D(t,e)?"<":"["}M.peek=fe;function M(t,n,e,a){const c=t.referenceType,u=e.enter("linkReference");let i=e.enter("label");const l=e.createTracker(a);let o=l.move("[");const r=e.containerPhrasing(t,{before:o,after:"]",...l.current()});o+=l.move(r+"]["),i();const s=e.stack;e.stack=[],i=e.enter("reference");const h=e.safe(e.associationId(t),{before:o,after:"]",...l.current()});return i(),e.stack=s,u(),c==="full"||!r||r!==h?o+=l.move(h+"]"):c==="shortcut"?o=o.slice(0,-1):o+=l.move("]"),o}function fe(){return"["}function T(t){const n=t.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function he(t){const n=T(t),e=t.options.bulletOther;if(!e)return n==="*"?"-":"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(e===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+e+"`) to be different");return e}function me(t){const n=t.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function F(t){const n=t.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function pe(t,n,e,a){const c=e.enter("list"),u=e.bulletCurrent;let i=t.ordered?me(e):T(e);const l=t.ordered?i==="."?")":".":he(e);let o=n&&e.bulletLastUsed?i===e.bulletLastUsed:!1;if(!t.ordered){const s=t.children?t.children[0]:void 0;if((i==="*"||i==="-")&&s&&(!s.children||!s.children[0])&&e.stack[e.stack.length-1]==="list"&&e.stack[e.stack.length-2]==="listItem"&&e.stack[e.stack.length-3]==="list"&&e.stack[e.stack.length-4]==="listItem"&&e.indexStack[e.indexStack.length-1]===0&&e.indexStack[e.indexStack.length-2]===0&&e.indexStack[e.indexStack.length-3]===0&&(o=!0),F(e)===i&&s){let h=-1;for(;++h<t.children.length;){const x=t.children[h];if(x&&x.type==="listItem"&&x.children&&x.children[0]&&x.children[0].type==="thematicBreak"){o=!0;break}}}}o&&(i=l),e.bulletCurrent=i;const r=e.containerFlow(t,a);return e.bulletLastUsed=i,e.bulletCurrent=u,c(),r}function ge(t){const n=t.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function de(t,n,e,a){const c=ge(e);let u=e.bulletCurrent||T(e);n&&n.type==="list"&&n.ordered&&(u=(typeof n.start=="number"&&n.start>-1?n.start:1)+(e.options.incrementListMarker===!1?0:n.children.indexOf(t))+u);let i=u.length+1;(c==="tab"||c==="mixed"&&(n&&n.type==="list"&&n.spread||t.spread))&&(i=Math.ceil(i/4)*4);const l=e.createTracker(a);l.move(u+" ".repeat(i-u.length)),l.shift(i);const o=e.enter("listItem"),r=e.indentLines(e.containerFlow(t,l.current()),s);return o(),r;function s(h,x,k){return x?(k?"":" ".repeat(i))+h:(k?u:u+" ".repeat(i-u.length))+h}}function ke(t,n,e,a){const c=e.enter("paragraph"),u=e.enter("phrasing"),i=e.containerPhrasing(t,a);return u(),c(),i}const xe=U(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function be(t,n,e,a){return(t.children.some(function(i){return xe(i)})?e.containerPhrasing:e.containerFlow).call(e,t,a)}function ve(t){const n=t.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}$.peek=we;function $(t,n,e,a){const c=ve(e),u=e.enter("strong"),i=e.createTracker(a);let l=i.move(c+c);return l+=i.move(e.containerPhrasing(t,{before:l,after:c,...i.current()})),l+=i.move(c+c),u(),l}function we(t,n,e){return e.options.strong||"*"}function Ce(t,n,e,a){return e.safe(t.value,a)}function Te(t){const n=t.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function _e(t,n,e){const a=(F(e)+(e.options.ruleSpaces?" ":"")).repeat(Te(e));return e.options.ruleSpaces?a.slice(0,-1):a}const Ie={blockquote:J,break:P,code:Z,definition:te,emphasis:E,hardBreak:P,heading:oe,html:S,image:L,imageReference:A,inlineCode:B,link:O,linkReference:M,list:pe,listItem:de,paragraph:ke,root:be,strong:$,text:Ce,thematicBreak:_e};function Oe(){return{enter:{table:Re,tableData:y,tableHeader:y,tableRow:ye},exit:{codeText:ze,table:Pe,tableData:w,tableHeader:w,tableRow:w}}}function Re(t){const n=t._align;this.enter({type:"table",align:n.map(function(e){return e==="none"?null:e}),children:[]},t),this.data.inTable=!0}function Pe(t){this.exit(t),this.data.inTable=void 0}function ye(t){this.enter({type:"tableRow",children:[]},t)}function w(t){this.exit(t)}function y(t){this.enter({type:"tableCell",children:[]},t)}function ze(t){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,Ee));const e=this.stack[this.stack.length-1];q(e.type==="inlineCode"),e.value=n,this.exit(t)}function Ee(t,n){return n==="|"?n:t}function Me(t){const n=t||{},e=n.tableCellPadding,a=n.tablePipeAlign,c=n.stringLength,u=e?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:x,table:i,tableCell:o,tableRow:l}};function i(k,g,m,f){return r(s(k,m,f),k.align)}function l(k,g,m,f){const p=h(k,m,f),d=r([p]);return d.slice(0,d.indexOf(`
`))}function o(k,g,m,f){const p=m.enter("tableCell"),d=m.enter("phrasing"),b=m.containerPhrasing(k,{...f,before:u,after:u});return d(),p(),b}function r(k,g){return H(k,{align:g,alignDelimiters:a,padding:e,stringLength:c})}function s(k,g,m){const f=k.children;let p=-1;const d=[],b=g.enter("table");for(;++p<f.length;)d[p]=h(f[p],g,m);return b(),d}function h(k,g,m){const f=k.children;let p=-1;const d=[],b=g.enter("tableRow");for(;++p<f.length;)d[p]=o(f[p],k,g,m);return b(),d}function x(k,g,m){let f=Ie.inlineCode(k,g,m);return m.stack.includes("tableCell")&&(f=f.replace(/\|/g,"\\$&")),f}}export{Oe as gfmTableFromMarkdown,Me as gfmTableToMarkdown};
